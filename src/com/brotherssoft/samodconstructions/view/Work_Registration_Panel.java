/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.brotherssoft.samodconstructions.view;

import com.brotherssoft.samodconstructions.controller.R_WorkController;
import com.brotherssoft.samodconstructions.custom.IDGenerator;
import com.brotherssoft.samodconstructions.model.R_Work;
import com.brotherssoft.samodconstructions.serverconnector.ServerConnector;
import java.awt.Color;
import java.awt.event.KeyEvent;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Akvasoft
 */
public class Work_Registration_Panel extends javax.swing.JPanel {

    R_WorkController workController;
    DefaultTableModel dtmWork;
    
    /**
     * Creates new form Work_Registration_Panel
     */
    public Work_Registration_Panel() throws Exception {
        initComponents();
        
        workController = ServerConnector.getServerConnetor().getWorkController();
        dtmWork = (DefaultTableModel) tbl_workInfo.getModel();
        
        loadWorkTable();
        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        Work_Registration_Panel = new javax.swing.JPanel();
        user_panel_hedding10 = new javax.swing.JPanel();
        jLabel90 = new javax.swing.JLabel();
        jLabel91 = new javax.swing.JLabel();
        jSeparator22 = new javax.swing.JSeparator();
        bank_panel_input_area3 = new javax.swing.JPanel();
        jLabel153 = new javax.swing.JLabel();
        jLabel155 = new javax.swing.JLabel();
        jLabel156 = new javax.swing.JLabel();
        txt_work_name1 = new javax.swing.JTextField();
        jScrollPane13 = new javax.swing.JScrollPane();
        txtArea_work_desc1 = new javax.swing.JTextArea();
        btn_save_work = new javax.swing.JButton();
        btn_work_new = new javax.swing.JButton();
        cmb_work_states1 = new javax.swing.JComboBox<>();
        btn_work = new javax.swing.JButton();
        bank_panel_tbl3 = new javax.swing.JPanel();
        jScrollPane17 = new javax.swing.JScrollPane();
        tbl_workInfo = new javax.swing.JTable();
        txt_search_work = new javax.swing.JTextField();

        Work_Registration_Panel.setBackground(new java.awt.Color(255, 255, 255));
        Work_Registration_Panel.setPreferredSize(new java.awt.Dimension(1050, 710));

        user_panel_hedding10.setBackground(new java.awt.Color(122, 72, 222));

        jLabel90.setBackground(new java.awt.Color(255, 255, 255));
        jLabel90.setFont(new java.awt.Font("Times New Roman", 3, 18)); // NOI18N
        jLabel90.setForeground(new java.awt.Color(204, 204, 255));
        jLabel90.setText("Administrations / System Management / Master Details /");

        jLabel91.setFont(new java.awt.Font("Segoe UI", 3, 24)); // NOI18N
        jLabel91.setForeground(new java.awt.Color(204, 204, 204));
        jLabel91.setText("Work Registration");

        javax.swing.GroupLayout user_panel_hedding10Layout = new javax.swing.GroupLayout(user_panel_hedding10);
        user_panel_hedding10.setLayout(user_panel_hedding10Layout);
        user_panel_hedding10Layout.setHorizontalGroup(
            user_panel_hedding10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(user_panel_hedding10Layout.createSequentialGroup()
                .addGroup(user_panel_hedding10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(user_panel_hedding10Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel90, javax.swing.GroupLayout.PREFERRED_SIZE, 531, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 511, Short.MAX_VALUE))
                    .addGroup(user_panel_hedding10Layout.createSequentialGroup()
                        .addGap(39, 39, 39)
                        .addComponent(jLabel91)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jSeparator22)))
                .addContainerGap())
        );
        user_panel_hedding10Layout.setVerticalGroup(
            user_panel_hedding10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(user_panel_hedding10Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel90, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(user_panel_hedding10Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel91)
                    .addComponent(jSeparator22, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(33, Short.MAX_VALUE))
        );

        bank_panel_input_area3.setBackground(new java.awt.Color(255, 255, 255));
        bank_panel_input_area3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Save And Modify Work", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 3, 14))); // NOI18N

        jLabel153.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel153.setText("Work Name");

        jLabel155.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel155.setText("States");

        jLabel156.setFont(new java.awt.Font("Segoe UI", 3, 14)); // NOI18N
        jLabel156.setText("Work Description");

        txt_work_name1.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        txt_work_name1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txt_work_name1ActionPerformed(evt);
            }
        });
        txt_work_name1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txt_work_name1KeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txt_work_name1KeyReleased(evt);
            }
        });

        txtArea_work_desc1.setColumns(20);
        txtArea_work_desc1.setRows(5);
        txtArea_work_desc1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtArea_work_desc1KeyPressed(evt);
            }
        });
        jScrollPane13.setViewportView(txtArea_work_desc1);

        btn_save_work.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btn_save_work.setText("Save");
        btn_save_work.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_save_workActionPerformed(evt);
            }
        });

        btn_work_new.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btn_work_new.setText("New");
        btn_work_new.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_work_newActionPerformed(evt);
            }
        });

        cmb_work_states1.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        cmb_work_states1.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Active", "Inactive" }));

        btn_work.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btn_work.setText("Work");
        btn_work.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn_workMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout bank_panel_input_area3Layout = new javax.swing.GroupLayout(bank_panel_input_area3);
        bank_panel_input_area3.setLayout(bank_panel_input_area3Layout);
        bank_panel_input_area3Layout.setHorizontalGroup(
            bank_panel_input_area3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(bank_panel_input_area3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(bank_panel_input_area3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(bank_panel_input_area3Layout.createSequentialGroup()
                        .addComponent(jLabel153, javax.swing.GroupLayout.PREFERRED_SIZE, 146, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txt_work_name1))
                    .addGroup(bank_panel_input_area3Layout.createSequentialGroup()
                        .addComponent(jLabel156, javax.swing.GroupLayout.PREFERRED_SIZE, 146, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jScrollPane13, javax.swing.GroupLayout.DEFAULT_SIZE, 326, Short.MAX_VALUE))
                    .addGroup(bank_panel_input_area3Layout.createSequentialGroup()
                        .addComponent(jLabel155, javax.swing.GroupLayout.PREFERRED_SIZE, 146, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(cmb_work_states1, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, bank_panel_input_area3Layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(btn_work, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btn_save_work, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btn_work_new, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        bank_panel_input_area3Layout.setVerticalGroup(
            bank_panel_input_area3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(bank_panel_input_area3Layout.createSequentialGroup()
                .addGap(48, 48, 48)
                .addGroup(bank_panel_input_area3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel153, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txt_work_name1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(bank_panel_input_area3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel156, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jScrollPane13, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(bank_panel_input_area3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel155, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cmb_work_states1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(30, 30, 30)
                .addGroup(bank_panel_input_area3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btn_save_work, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btn_work_new, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btn_work, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        bank_panel_tbl3.setBackground(new java.awt.Color(255, 255, 255));
        bank_panel_tbl3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Work Infomation", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Segoe UI", 3, 14))); // NOI18N

        tbl_workInfo.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        tbl_workInfo.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null},
                {null}
            },
            new String [] {
                "Work Name"
            }
        ));
        tbl_workInfo.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        tbl_workInfo.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tbl_workInfoMouseClicked(evt);
            }
        });
        jScrollPane17.setViewportView(tbl_workInfo);

        txt_search_work.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        txt_search_work.setForeground(new java.awt.Color(102, 102, 102));
        txt_search_work.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txt_search_work.setText("Search Work");
        txt_search_work.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                txt_search_workMouseClicked(evt);
            }
        });
        txt_search_work.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txt_search_workKeyReleased(evt);
            }
        });

        javax.swing.GroupLayout bank_panel_tbl3Layout = new javax.swing.GroupLayout(bank_panel_tbl3);
        bank_panel_tbl3.setLayout(bank_panel_tbl3Layout);
        bank_panel_tbl3Layout.setHorizontalGroup(
            bank_panel_tbl3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(bank_panel_tbl3Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane17, javax.swing.GroupLayout.DEFAULT_SIZE, 496, Short.MAX_VALUE)
                .addContainerGap())
            .addGroup(bank_panel_tbl3Layout.createSequentialGroup()
                .addGap(243, 243, 243)
                .addComponent(txt_search_work, javax.swing.GroupLayout.PREFERRED_SIZE, 250, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        bank_panel_tbl3Layout.setVerticalGroup(
            bank_panel_tbl3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, bank_panel_tbl3Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(txt_search_work, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane17, javax.swing.GroupLayout.PREFERRED_SIZE, 452, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        javax.swing.GroupLayout Work_Registration_PanelLayout = new javax.swing.GroupLayout(Work_Registration_Panel);
        Work_Registration_Panel.setLayout(Work_Registration_PanelLayout);
        Work_Registration_PanelLayout.setHorizontalGroup(
            Work_Registration_PanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(user_panel_hedding10, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(Work_Registration_PanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(bank_panel_input_area3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(bank_panel_tbl3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        Work_Registration_PanelLayout.setVerticalGroup(
            Work_Registration_PanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(Work_Registration_PanelLayout.createSequentialGroup()
                .addComponent(user_panel_hedding10, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(Work_Registration_PanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(bank_panel_input_area3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(bank_panel_tbl3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(Work_Registration_Panel, javax.swing.GroupLayout.DEFAULT_SIZE, 1062, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(Work_Registration_Panel, javax.swing.GroupLayout.DEFAULT_SIZE, 685, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btn_workMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn_workMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_btn_workMouseClicked

    private void btn_save_workActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_save_workActionPerformed
        if(btn_save_work.getText().equalsIgnoreCase("Save")){
            saveWork();
        }else{
            updateWork();
        }
        clearFields();
    }//GEN-LAST:event_btn_save_workActionPerformed

    private void tbl_workInfoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tbl_workInfoMouseClicked
        loadFieldsFromTable(searchWorkFromTableName());
        txt_search_work.setText("Search Work");
        txt_search_work.setForeground(Color.GRAY);
    }//GEN-LAST:event_tbl_workInfoMouseClicked

    private void btn_work_newActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_work_newActionPerformed
        clearFields();
    }//GEN-LAST:event_btn_work_newActionPerformed

    private void txt_search_workKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txt_search_workKeyReleased
        try {
            
            dtmWork.setRowCount(0);
            List<R_Work> allWorks = workController.getAllWorksByLetter(txt_search_work.getText());
            for (R_Work allWork : allWorks) {
                String[] rowData = {allWork.getWork_name()};
                dtmWork.addRow(rowData);
            }
            
        } catch (Exception ex) {
            Logger.getLogger(Work_Registration_Panel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txt_search_workKeyReleased

    private void txt_search_workMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_txt_search_workMouseClicked
        txt_search_work.setText("");
        txt_search_work.setForeground(Color.BLACK);
    }//GEN-LAST:event_txt_search_workMouseClicked

    private void txt_work_name1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txt_work_name1ActionPerformed
        txtArea_work_desc1.requestFocus();
    }//GEN-LAST:event_txt_work_name1ActionPerformed

    private void txtArea_work_desc1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtArea_work_desc1KeyPressed
        if(evt.getKeyCode() == KeyEvent.VK_ENTER){
            cmb_work_states1.requestFocus();
        }
    }//GEN-LAST:event_txtArea_work_desc1KeyPressed

    private void txt_work_name1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txt_work_name1KeyPressed
        // TODO add your handling code here:
    }//GEN-LAST:event_txt_work_name1KeyPressed

    private void txt_work_name1KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txt_work_name1KeyReleased
        try {
            R_Work searchWork = workController.searchWork(txt_work_name1.getText());
            if(searchWork  != null){
                JOptionPane.showMessageDialog(this, "A Work Already Registered on this Name");
                loadFieldsFromTable(searchWork);
            }
        } catch (Exception ex) {
            Logger.getLogger(Work_Registration_Panel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_txt_work_name1KeyReleased


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel Work_Registration_Panel;
    private javax.swing.JPanel bank_panel_input_area3;
    private javax.swing.JPanel bank_panel_tbl3;
    private javax.swing.JButton btn_save_work;
    private javax.swing.JButton btn_work;
    private javax.swing.JButton btn_work_new;
    private javax.swing.JComboBox<String> cmb_work_states1;
    private javax.swing.JLabel jLabel153;
    private javax.swing.JLabel jLabel155;
    private javax.swing.JLabel jLabel156;
    private javax.swing.JLabel jLabel90;
    private javax.swing.JLabel jLabel91;
    private javax.swing.JScrollPane jScrollPane13;
    private javax.swing.JScrollPane jScrollPane17;
    private javax.swing.JSeparator jSeparator22;
    private javax.swing.JTable tbl_workInfo;
    private javax.swing.JTextArea txtArea_work_desc1;
    private javax.swing.JTextField txt_search_work;
    private javax.swing.JTextField txt_work_name1;
    private javax.swing.JPanel user_panel_hedding10;
    // End of variables declaration//GEN-END:variables

    private void saveWork() {
        try {
            
            int workId = IDGenerator.getNewID("r_work", "WORK_ID");
            String workName = txt_work_name1.getText();
            String workDesc = txtArea_work_desc1.getText();
            String workStatus = Integer.toString(cmb_work_states1.getSelectedIndex());
            
            R_Work work = new R_Work(workId, workName, workDesc, workStatus);
            boolean addWork = workController.addWork(work);
            if (addWork) {
                JOptionPane.showMessageDialog(this, "Work Details Added Successfully..");
            }else{
                JOptionPane.showMessageDialog(this, "Adding Work Details Occured Some Error.. Please Check Again..");
            }
            
        } catch (Exception ex) {
            Logger.getLogger(Work_Registration_Panel.class.getName()).log(Level.SEVERE, null, ex);
        }
        loadWorkTable();
    }

    private void loadWorkTable() {
        try {
            
            dtmWork.setRowCount(0);
            List<R_Work> allWorks = workController.getAllWorks();
            for (R_Work allWork : allWorks) {
                String[] rowData = {allWork.getWork_name()};
                dtmWork.addRow(rowData);
            }
            
        } catch (Exception ex) {
            Logger.getLogger(Work_Registration_Panel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private void updateWork() {
        try {
            
            int workId = searchWorkFromTableName().getWork_id();
            String workName = txt_work_name1.getText();
            String workDesc = txtArea_work_desc1.getText();
            String workStatus = Integer.toString(cmb_work_states1.getSelectedIndex());
            
            R_Work work = new R_Work(workId, workName, workDesc, workStatus);
            boolean updateWork = workController.updateWork(work);
            if (updateWork) {
                JOptionPane.showMessageDialog(this, "Work Details Updated Successfully..");
            }else{
                JOptionPane.showMessageDialog(this, "Updating Work Details Occured Some Error.. Please Check Again..");
            }
            
        } catch (Exception ex) {
            Logger.getLogger(Work_Registration_Panel.class.getName()).log(Level.SEVERE, null, ex);
        }
        loadWorkTable();
    }

    private void loadFieldsFromTable(R_Work work) {
        
        txt_work_name1.setText(work.getWork_name());
        txtArea_work_desc1.setText(work.getWork_description());
        cmb_work_states1.setSelectedIndex(Integer.parseInt(work.getWork_status()));
        
        btn_save_work.setText("Update");
    }

    private R_Work searchWorkFromTableName() {
        int selectedRow = tbl_workInfo.getSelectedRow();
        String workName = (String) dtmWork.getValueAt(selectedRow, 0);
        R_Work searchWork = null;
        try {
            searchWork = workController.searchWork(workName);
        } catch (Exception ex) {
            Logger.getLogger(Work_Registration_Panel.class.getName()).log(Level.SEVERE, null, ex);
        }
        return searchWork;
    }

    private void clearFields() {
        txt_work_name1.setText("");
        txtArea_work_desc1.setText("");
        cmb_work_states1.setSelectedIndex(0);
        
        btn_save_work.setText("Save");
    }
}
